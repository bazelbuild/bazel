---
platforms:
  # This task actually runs Rocky Linux 8 (OpenJDK 11, gcc 10.2.1)
  centos7_java11_devtoolset10:
    build_targets:
      - "//src:bazel"
      - "//src:bazel_nojdk"
    build_flags:
      - "-c"
      - "opt"
  ubuntu1804:
    build_targets:
      - "//src:bazel"
      - "//src:bazel_nojdk"
    build_flags:
      - "-c"
      - "opt"
  ubuntu2004_java11:
    build_targets:
      - "//src:bazel"
      - "//src:bazel_nojdk"
    build_flags:
      - "-c"
      - "opt"
  macos:
    xcode_version: "16.2.0"
    build_targets:
      - "//src:bazel"
      - "//src:bazel_nojdk"
    build_flags:
      - "-c"
      - "opt"
  macos_arm64:
    xcode_version: "16.2.0"
    build_targets:
      - "//src:bazel"
      - "//src:bazel_nojdk"
    build_flags:
      - "-c"
      - "opt"
      # TODO(pcloudy): Remove the following flag when we actually use Apple
      # Silicon machines for macos_arm64 platform
      - "--cpu=darwin_arm64"
  windows:
    build_flags:
      - "--copt=-w"
      - "--host_copt=-w"
      - "-c"
      - "opt"
    build_targets:
      - "//src:bazel.exe"
      - "//src:bazel_nojdk.exe"
  windows_arm64:
    build_flags:
      - "--copt=-w"
      - "--host_copt=-w"
      - "-c"
      - "opt"
      - "--config=windows_arm64"
    build_targets:
      - "//src:bazel.exe"
      - "//src:bazel_nojdk.exe"
